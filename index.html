<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora Plato Â· Embrague Â· Calibrado</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .card { background: white; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,.06); padding: 16px; }
    .img-fixed { width: 100%; max-width: 340px; height: auto; border-radius: 8px; object-fit: cover; border: 1px solid #e5e7eb; }
    .small-mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; }
  </style>
</head>
<body class="bg-slate-100 p-6">
  <div class="max-w-5xl mx-auto">
    <div class="flex justify-between items-center mb-4">
      <h1 id="title" class="text-2xl font-bold"></h1>
      <select id="langSelect" class="border rounded p-2">
        <option value="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
        <option value="en">ðŸ‡¬ðŸ‡§ English</option>
        <option value="fr">ðŸ‡«ðŸ‡· FranÃ§ais</option>
        <option value="it">ðŸ‡®ðŸ‡¹ Italiano</option>
        <option value="de">ðŸ‡©ðŸ‡ª Deutsch</option>
      </select>
    </div>

    <div class="grid md:grid-cols-3 gap-4 mb-6">
      <!-- PRIMER PASO -->
      <div class="card">
        <h2 id="plato-title" class="font-semibold mb-2"></h2>
        <div class="grid grid-cols-1 gap-2 mb-3">
          <input class="p-2 border rounded" id="p1" type="text" placeholder="0.00" inputmode="decimal" />
          <input class="p-2 border rounded" id="p2" type="text" placeholder="0.00" inputmode="decimal" />
          <input class="p-2 border rounded" id="p3" type="text" placeholder="0.00" inputmode="decimal" />
        </div>
        <img id="imgPlato" class="img-fixed mb-3" src="Medida-plato.jpg" alt="Medida Plato" />
        <div><strong id="avg1-label"></strong> <span id="mediaPlato" class="small-mono text-slate-600">â€”</span></div>
      </div>

      <!-- SEGUNDO PASO -->
      <div class="card">
        <h2 id="embrague-title" class="font-semibold mb-2"></h2>
        <div class="grid grid-cols-1 gap-2 mb-3">
          <input class="p-2 border rounded" id="e1" type="text" placeholder="0.00" inputmode="decimal" />
          <input class="p-2 border rounded" id="e2" type="text" placeholder="0.00" inputmode="decimal" />
          <input class="p-2 border rounded" id="e3" type="text" placeholder="0.00" inputmode="decimal" />
        </div>
        <img id="imgEmbrague" class="img-fixed mb-3" src="Medida-embrague.jpg" alt="Medida Embrague" />
        <div><strong id="avg2-label"></strong> <span id="mediaEmbrague" class="small-mono text-slate-600">â€”</span></div>
      </div>

      <!-- TERCER PASO -->
      <div class="card">
        <h2 id="calibrado-title" class="font-semibold mb-2"></h2>
        <div class="grid grid-cols-1 gap-2 mb-3">
          <input class="p-2 border rounded" id="c1" type="text" placeholder="0.00" inputmode="decimal" />
          <input class="p-2 border rounded" id="c2" type="text" placeholder="0.00" inputmode="decimal" />
          <input class="p-2 border rounded" id="c3" type="text" placeholder="0.00" inputmode="decimal" />
        </div>
        <img id="imgCalibrado" class="img-fixed mb-3" src="Calibrado_tool.jpg" alt="Calibrado Tool" />
        <div><strong id="avg3-label"></strong> <span id="mediaCalibrado" class="small-mono text-slate-600">â€”</span></div>
      </div>
    </div>

    <div class="card mb-6">
      <h2 id="result-title" class="font-semibold mb-2"></h2>
      <p id="result-desc" class="mb-2"></p>

      <div class="grid md:grid-cols-2 gap-4 mt-3">
        <div>
          <p><strong id="show1-label"></strong> <span id="showPlato" class="small-mono text-slate-600">â€”</span></p>
          <p><strong id="show2-label"></strong> <span id="showEmbrague" class="small-mono text-slate-600">â€”</span></p>
          <p><strong id="show3-label"></strong> <span id="showCalibrado" class="small-mono text-slate-600">â€”</span></p>
        </div>
        <div>
          <p class="text-lg"><strong id="final-label"></strong> <span id="resultado" class="text-xl font-mono">â€”</span></p>
          <div class="mt-3 flex gap-2 flex-wrap">
            <button id="calcular" class="px-3 py-2 rounded bg-blue-600 text-white"></button>
            <button id="copiar" class="px-3 py-2 rounded bg-green-600 text-white"></button>
            <button id="reset" class="px-3 py-2 rounded bg-red-500 text-white"></button>
          </div>
        </div>
      </div>
      <p id="note" class="mt-3 text-sm text-slate-500"></p>
    </div>
  </div>

  <script>
    // ---- Traducciones ----
    const texts = {
      es: {
        title: "Calculadora online â€” Plato Â· Embrague Â· Calibrado",
        plato: "PRIMER PASO â€” Medida Plato",
        embrague: "SEGUNDO PASO â€” Medida Embrague",
        calibrado: "TERCER PASO â€” Calibrado Tool",
        avg: "Media:",
        resultTitle: "Resultado final",
        resultDesc: "Grosor necesario para el correcto galgado de 0.4mm Â±0.1",
        show1: "Medida Plato:",
        show2: "Medida Embrague:",
        show3: "Calibrado Tool:",
        final: "Grosor necesario:",
        calcular: "Calcular",
        copiar: "Copiar resultado",
        reset: "Reset",
        note: "Los inputs aceptan coma o punto como separador decimal."
      },
      en: {
        title: "Online Calculator â€” Plate Â· Clutch Â· Calibration",
        plato: "STEP 1 â€” Plate Measurement",
        embrague: "STEP 2 â€” Clutch Measurement",
        calibrado: "STEP 3 â€” Calibration Tool",
        avg: "Average:",
        resultTitle: "Final Result",
        resultDesc: "Required thickness for correct clearance: 0.4mm Â±0.1",
        show1: "Plate Measurement:",
        show2: "Clutch Measurement:",
        show3: "Calibration Tool:",
        final: "Required Thickness:",
        calcular: "Calculate",
        copiar: "Copy Result",
        reset: "Reset",
        note: "Inputs accept comma or dot as decimal separator."
      },
      fr: {
        title: "Calculateur en ligne â€” Plateau Â· Embrayage Â· Calibrage",
        plato: "PREMIÃˆRE Ã‰TAPE â€” Mesure du Plateau",
        embrague: "DEUXIÃˆME Ã‰TAPE â€” Mesure de lâ€™Embrayage",
        calibrado: "TROISIÃˆME Ã‰TAPE â€” Outil de Calibrage",
        avg: "Moyenne :",
        resultTitle: "RÃ©sultat final",
        resultDesc: "Ã‰paisseur nÃ©cessaire pour un jeu correct : 0,4 mm Â±0,1",
        show1: "Mesure du Plateau :",
        show2: "Mesure de lâ€™Embrayage :",
        show3: "Outil de Calibrage :",
        final: "Ã‰paisseur requise :",
        calcular: "Calculer",
        copiar: "Copier le rÃ©sultat",
        reset: "RÃ©initialiser",
        note: "Les champs acceptent la virgule ou le point comme sÃ©parateur dÃ©cimal."
      },
      it: {
        title: "Calcolatrice online â€” Piatto Â· Frizione Â· Calibrazione",
        plato: "PRIMO PASSO â€” Misura Piatto",
        embrague: "SECONDO PASSO â€” Misura Frizione",
        calibrado: "TERZO PASSO â€” Strumento di Calibrazione",
        avg: "Media:",
        resultTitle: "Risultato finale",
        resultDesc: "Spessore necessario per gioco corretto: 0,4mm Â±0,1",
        show1: "Misura Piatto:",
        show2: "Misura Frizione:",
        show3: "Strumento di Calibrazione:",
        final: "Spessore richiesto:",
        calcular: "Calcola",
        copiar: "Copia risultato",
        reset: "Reset",
        note: "Gli input accettano virgola o punto come separatore decimale."
      },
      de: {
        title: "Online-Rechner â€” Platte Â· Kupplung Â· Kalibrierung",
        plato: "SCHRITT 1 â€” Plattenmessung",
        embrague: "SCHRITT 2 â€” Kupplungsmessung",
        calibrado: "SCHRITT 3 â€” Kalibrierwerkzeug",
        avg: "Durchschnitt:",
        resultTitle: "Endergebnis",
        resultDesc: "Erforderliche Dicke fÃ¼r richtigen Abstand: 0,4mm Â±0,1",
        show1: "Plattenmessung:",
        show2: "Kupplungsmessung:",
        show3: "Kalibrierwerkzeug:",
        final: "Erforderliche Dicke:",
        calcular: "Berechnen",
        copiar: "Ergebnis kopieren",
        reset: "ZurÃ¼cksetzen",
        note: "Eingaben akzeptieren Komma oder Punkt als Dezimaltrennzeichen."
      }
    };

    const langSelect = document.getElementById('langSelect');
    function setLang(lang) {
      const t = texts[lang];
      document.getElementById('title').textContent = t.title;
      document.getElementById('plato-title').textContent = t.plato;
      document.getElementById('embrague-title').textContent = t.embrague;
      document.getElementById('calibrado-title').textContent = t.calibrado;
      document.getElementById('avg1-label').textContent = t.avg;
      document.getElementById('avg2-label').textContent = t.avg;
      document.getElementById('avg3-label').textContent = t.avg;
      document.getElementById('result-title').textContent = t.resultTitle;
      document.getElementById('result-desc').textContent = t.resultDesc;
      document.getElementById('show1-label').textContent = t.show1;
      document.getElementById('show2-label').textContent = t.show2;
      document.getElementById('show3-label').textContent = t.show3;
      document.getElementById('final-label').textContent = t.final;
      document.getElementById('calcular').textContent = t.calcular;
      document.getElementById('copiar').textContent = t.copiar;
      document.getElementById('reset').textContent = t.reset;
      document.getElementById('note').textContent = t.note;
    }

    langSelect.addEventListener('change', e => setLang(e.target.value));
    setLang('es'); // idioma por defecto

    // --- CÃ¡lculo idÃ©ntico al anterior ---
    function parseInputVal(v) {
      if (typeof v !== 'string') return null;
      v = v.trim().replace(',', '.');
      if (v === '') return null;
      const n = Number(v);
      return Number.isFinite(n) ? n : null;
    }
    function meanOfThree(a,b,c){ if([a,b,c].includes(null)) return null; return (a+b+c)/3;}
    function formatFixed2(x){return x===null?'â€”':x.toFixed(4);}
    function formatDisplay2(x){return x===null?'â€”':x.toFixed(2);}

    const ids=['p1','p2','p3','e1','e2','e3','c1','c2','c3']; const elems={}; ids.forEach(id=>elems[id]=document.getElementById(id));
    const mediaPlatoSpan=document.getElementById('mediaPlato'),mediaEmbragueSpan=document.getElementById('mediaEmbrague'),mediaCalibradoSpan=document.getElementById('mediaCalibrado');
    const showPlato=document.getElementById('showPlato'),showEmbrague=document.getElementById('showEmbrague'),showCalibrado=document.getElementById('showCalibrado'),resultadoSpan=document.getElementById('resultado');
    const btnCalcular=document.getElementById('calcular'),btnCopiar=document.getElementById('copiar'),btnReset=document.getElementById('reset');

    function computeAndDisplay(){
      const p=[parseInputVal(elems.p1.value),parseInputVal(elems.p2.value),parseInputVal(elems.p3.value)];
      const e=[parseInputVal(elems.e1.value),parseInputVal(elems.e2.value),parseInputVal(elems.e3.value)];
      const c=[parseInputVal(elems.c1.value),parseInputVal(elems.c2.value),parseInputVal(elems.c3.value)];
      const mP=meanOfThree(...p),mE=meanOfThree(...e),mC=meanOfThree(...c);
      mediaPlatoSpan.textContent=mP===null?'â€”':formatFixed2(mP);
      mediaEmbragueSpan.textContent=mE===null?'â€”':formatFixed2(mE);
      mediaCalibradoSpan.textContent=mC===null?'â€”':formatFixed2(mC);
      showPlato.textContent=formatDisplay2(mP);showEmbrague.textContent=formatDisplay2(mE);showCalibrado.textContent=formatDisplay2(mC);
      if(mP===null||mE===null||mC===null){resultadoSpan.textContent='â€”';return null;}
      const result=0.4-((mP+mE)-mC); resultadoSpan.textContent=result.toFixed(4); return result;
    }

    ids.forEach(id=>{
      elems[id].addEventListener('input',computeAndDisplay);
      elems[id].addEventListener('blur',()=>{const v=parseInputVal(elems[id].value);if(v!==null) elems[id].value=v.toFixed(2);computeAndDisplay();});
    });
    btnCalcular.addEventListener('click',()=>{const r=computeAndDisplay();if(r===null) alert("Por favor, introduce las 3 medidas en cada grupo.");});
    btnCopiar.addEventListener('click',()=>{const r=computeAndDisplay();if(r===null){alert("Introduce todas las medidas antes de copiar.");return;}navigator.clipboard.writeText(r.toFixed(4));alert("Resultado copiado: "+r.toFixed(4));});
    btnReset.addEventListener('click',()=>{ids.forEach(id=>elems[id].value='');computeAndDisplay();});
    computeAndDisplay();
  </script>
</body>
</html>
